# ç¤¾äº¤èŠå¤©H5åº”ç”¨ - å‰ç«¯é¡¹ç›®å¼€å‘æ–‡æ¡£

> æœ¬æ–‡æ¡£è¯¦ç»†æè¿°å‰ç«¯é¡¹ç›®çš„æ¨¡å—è®¾è®¡ã€åŠŸèƒ½å®ç°ã€æŠ€æœ¯æ–¹æ¡ˆç­‰

**ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-11-06
**é¡¹ç›®ç±»å‹**: H5 Web Application
**æŠ€æœ¯æ ˆ**: React 18 + TypeScript + Vite

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ¶æ„](#2-æŠ€æœ¯æ¶æ„)
3. [é¡¹ç›®ç»“æ„](#3-é¡¹ç›®ç»“æ„)
4. [æ ¸å¿ƒæ¨¡å—è®¾è®¡](#4-æ ¸å¿ƒæ¨¡å—è®¾è®¡)
   - 4.1 [é¦–é¡µæ¨¡å—](#41-é¦–é¡µæ¨¡å—)
   - 4.2 [ç¤¾åŒºæ¨¡å—](#42-ç¤¾åŒºæ¨¡å—)
   - 4.3 [å‘å¸ƒæ¨¡å—](#43-å‘å¸ƒæ¨¡å—)
   - 4.4 [æ¶ˆæ¯æ¨¡å—](#44-æ¶ˆæ¯æ¨¡å—)
   - 4.5 [æˆ‘çš„æ¨¡å—](#45-æˆ‘çš„æ¨¡å—)
5. [è·¯ç”±è®¾è®¡](#5-è·¯ç”±è®¾è®¡)
6. [çŠ¶æ€ç®¡ç†](#6-çŠ¶æ€ç®¡ç†)
7. [ç»„ä»¶åº“è®¾è®¡](#7-ç»„ä»¶åº“è®¾è®¡)
8. [å·¥å…·ç±»è®¾è®¡](#8-å·¥å…·ç±»è®¾è®¡)
9. [APIæ¥å£è®¾è®¡](#9-apiæ¥å£è®¾è®¡)
10. [å¼€å‘è§„èŒƒ](#10-å¼€å‘è§„èŒƒ)
11. [å¼€å‘è®¡åˆ’](#11-å¼€å‘è®¡åˆ’)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

ç¤¾äº¤èŠå¤©H5åº”ç”¨æ˜¯ä¸€ä¸ªé›†ç¤¾äº¤ã€èŠå¤©ã€å†…å®¹åˆ†äº«äºä¸€ä½“çš„ç§»åŠ¨ç«¯Webåº”ç”¨ï¼Œä¸ºç”¨æˆ·æä¾›æµç•…çš„ç¤¾äº¤ä½“éªŒã€‚

### 1.2 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

åº”ç”¨é‡‡ç”¨åº•éƒ¨Tabå¯¼èˆªï¼ŒåŒ…å«5ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š

| æ¨¡å— | å›¾æ ‡ | åŠŸèƒ½æè¿° |
|------|------|---------|
| é¦–é¡µ | ğŸ  | æ¨èå†…å®¹æµã€çƒ­é—¨åŠ¨æ€ã€å¥½å‹åŠ¨æ€ |
| ç¤¾åŒº | ğŸ‘¥ | è¯é¢˜å¹¿åœºã€å…´è¶£åœˆå­ã€ç”¨æˆ·å‘ç° |
| å‘å¸ƒ | â• | å‘å¸ƒåŠ¨æ€ã€å›¾æ–‡/è§†é¢‘å†…å®¹åˆ›ä½œ |
| æ¶ˆæ¯ | ğŸ’¬ | ç§èŠã€ç¾¤èŠã€æ¶ˆæ¯é€šçŸ¥ |
| æˆ‘çš„ | ğŸ‘¤ | ä¸ªäººä¸­å¿ƒã€è®¾ç½®ã€ä¸ªäººä¸»é¡µ |

### 1.3 ç”¨æˆ·æµç¨‹

```
æ³¨å†Œ/ç™»å½• â†’ å®Œå–„èµ„æ–™ â†’ æµè§ˆé¦–é¡µ â†’
  â”œâ”€ æŸ¥çœ‹æ¨èå†…å®¹
  â”œâ”€ æµè§ˆç¤¾åŒºè¯é¢˜
  â”œâ”€ å‘å¸ƒåŠ¨æ€å†…å®¹
  â”œâ”€ èŠå¤©äº’åŠ¨
  â””â”€ ç®¡ç†ä¸ªäººä¿¡æ¯
```

---

## 2. æŠ€æœ¯æ¶æ„

### 2.1 æŠ€æœ¯æ ˆ

```json
{
  "æ ¸å¿ƒæ¡†æ¶": "React 18.2",
  "å¼€å‘è¯­è¨€": "TypeScript 5.0",
  "æ„å»ºå·¥å…·": "Vite 5.0",
  "åŒ…ç®¡ç†å™¨": "pnpm 8.0",
  "UIæ¡†æ¶": "Ant Design Mobile 5.0",
  "çŠ¶æ€ç®¡ç†": "Redux Toolkit 2.0",
  "è·¯ç”±ç®¡ç†": "React Router 6.0",
  "HTTPè¯·æ±‚": "Axios 1.6",
  "WebSocket": "Socket.io-client 4.0",
  "æ ·å¼æ–¹æ¡ˆ": "CSS Modules + TailwindCSS",
  "ç§»åŠ¨ç«¯é€‚é…": "postcss-px-to-viewport",
  "å›¾æ ‡åº“": "React Icons",
  "æ—¥æœŸå¤„ç†": "dayjs",
  "å·¥å…·åº“": "lodash-es"
}
```

### 2.2 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           UI Components Layer           â”‚
â”‚  (å±•ç¤ºç»„ä»¶ - è´Ÿè´£UIæ¸²æŸ“)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Business Logic Layer            â”‚
â”‚  (è‡ªå®šä¹‰Hooks - è´Ÿè´£ä¸šåŠ¡é€»è¾‘)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           State Management              â”‚
â”‚  (Redux Toolkit - å…¨å±€çŠ¶æ€ç®¡ç†)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            Service Layer                â”‚
â”‚  (API Services - è´Ÿè´£æ•°æ®è¯·æ±‚)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             Utils Layer                 â”‚
â”‚  (å·¥å…·ç±» - SSå‰ç¼€å‘½å)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 è®¾è®¡åŸåˆ™

- âœ… **ä¸‰å±‚åˆ†ç¦»**ï¼šUIå±‚ã€é€»è¾‘å±‚ã€è¯·æ±‚å±‚ä¸¥æ ¼åˆ†ç¦»
- âœ… **ç»„ä»¶åŒ–**ï¼šé«˜å†…èšä½è€¦åˆçš„ç»„ä»¶è®¾è®¡
- âœ… **ç±»å‹å®‰å…¨**ï¼šTypeScriptä¸¥æ ¼æ¨¡å¼
- âœ… **ä»£ç å¤ç”¨**ï¼šå·¥å…·ç±»å°è£…ï¼Œç»„ä»¶å¤ç”¨
- âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šæ‡’åŠ è½½ã€è™šæ‹Ÿæ»šåŠ¨ã€ç¼“å­˜ç­–ç•¥

---

## 3. é¡¹ç›®ç»“æ„

### 3.1 å®Œæ•´ç›®å½•ç»“æ„

```
social-chat-h5/
â”œâ”€â”€ public/                          # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ logo.png
â”‚   â””â”€â”€ index.html
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/                      # èµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ images/                  # å›¾ç‰‡èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ avatar/              # é»˜è®¤å¤´åƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ empty/               # ç©ºçŠ¶æ€å›¾ç‰‡
â”‚   â”‚   â”‚   â””â”€â”€ common/              # é€šç”¨å›¾ç‰‡
â”‚   â”‚   â”œâ”€â”€ icons/                   # å›¾æ ‡èµ„æº
â”‚   â”‚   â””â”€â”€ styles/                  # å…¨å±€æ ·å¼
â”‚   â”‚       â”œâ”€â”€ variables.css        # CSSå˜é‡
â”‚   â”‚       â”œâ”€â”€ reset.css            # æ ·å¼é‡ç½®
â”‚   â”‚       â””â”€â”€ common.css           # å…¬å…±æ ·å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                  # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout/                  # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ TabBar/              # åº•éƒ¨å¯¼èˆªæ 
â”‚   â”‚   â”‚   â”œâ”€â”€ NavBar/              # é¡¶éƒ¨å¯¼èˆªæ 
â”‚   â”‚   â”‚   â””â”€â”€ MainLayout/          # ä¸»å¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ SSDialog/                # ç»Ÿä¸€å¼¹çª—ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Avatar/                  # å¤´åƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ImageUpload/             # å›¾ç‰‡ä¸Šä¼ 
â”‚   â”‚   â”œâ”€â”€ VideoUpload/             # è§†é¢‘ä¸Šä¼ 
â”‚   â”‚   â”œâ”€â”€ Loading/                 # åŠ è½½ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Empty/                   # ç©ºçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ PullRefresh/             # ä¸‹æ‹‰åˆ·æ–°
â”‚   â”‚   â”œâ”€â”€ InfiniteScroll/          # æ— é™æ»šåŠ¨
â”‚   â”‚   â””â”€â”€ index.ts                 # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ views/                       # é¡µé¢æ¨¡å—ï¼ˆ5ä¸ªæ ¸å¿ƒæ¨¡å—ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Home/                    # ã€é¦–é¡µæ¨¡å—ã€‘
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx            # é¦–é¡µä¸»å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.module.css
â”‚   â”‚   â”‚   â”œâ”€â”€ FeedList/            # å†…å®¹æµåˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FeedItem/        # å†…å®¹æµå•é¡¹
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RecommendUsers/      # æ¨èç”¨æˆ·
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ HotTopics/           # çƒ­é—¨è¯é¢˜
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Community/               # ã€ç¤¾åŒºæ¨¡å—ã€‘
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx            # ç¤¾åŒºä¸»å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ Community.module.css
â”‚   â”‚   â”‚   â”œâ”€â”€ TopicList/           # è¯é¢˜åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TopicCard/       # è¯é¢˜å¡ç‰‡
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TopicDetail/         # è¯é¢˜è¯¦æƒ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PostList/        # è¯é¢˜ä¸‹çš„å¸–å­
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ UserDiscover/        # ç”¨æˆ·å‘ç°
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Publish/                 # ã€å‘å¸ƒæ¨¡å—ã€‘
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx            # å‘å¸ƒä¸»å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ Publish.module.css
â”‚   â”‚   â”‚   â”œâ”€â”€ PublishType/         # å‘å¸ƒç±»å‹é€‰æ‹©
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TextPost/            # æ–‡å­—å‘å¸ƒ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ImagePost/           # å›¾ç‰‡å‘å¸ƒ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ImagePreview/    # å›¾ç‰‡é¢„è§ˆ
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ VideoPost/           # è§†é¢‘å‘å¸ƒ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PublishSettings/     # å‘å¸ƒè®¾ç½®ï¼ˆæƒé™ã€è¯é¢˜ç­‰ï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Message/                 # ã€æ¶ˆæ¯æ¨¡å—ã€‘
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx            # æ¶ˆæ¯ä¸»å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ Message.module.css
â”‚   â”‚   â”‚   â”œâ”€â”€ ConversationList/    # ä¼šè¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ConversationItem/  # ä¼šè¯é¡¹
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatRoom/            # èŠå¤©å®¤
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MessageList/     # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MessageBubble/  # æ¶ˆæ¯æ°”æ³¡
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MessageInput/    # æ¶ˆæ¯è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Toolbar/     # å·¥å…·æ 
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GroupChat/           # ç¾¤èŠ
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Notification/        # é€šçŸ¥æ¶ˆæ¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Profile/                 # ã€æˆ‘çš„æ¨¡å—ã€‘
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx            # ä¸ªäººä¸­å¿ƒä¸»å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.module.css
â”‚   â”‚   â”‚   â”œâ”€â”€ UserInfo/            # ç”¨æˆ·ä¿¡æ¯å¡ç‰‡
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MyPosts/             # æˆ‘çš„åŠ¨æ€
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MyFriends/           # æˆ‘çš„å¥½å‹
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings/            # è®¾ç½®
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AccountSettings/ # è´¦å·è®¾ç½®
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PrivacySettings/ # éšç§è®¾ç½®
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AboutSettings/   # å…³äºè®¾ç½®
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ EditProfile/         # ç¼–è¾‘èµ„æ–™
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Auth/                    # è®¤è¯æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ Login/               # ç™»å½•
â”‚   â”‚       â”œâ”€â”€ Register/            # æ³¨å†Œ
â”‚   â”‚       â””â”€â”€ ForgotPassword/      # å¿˜è®°å¯†ç 
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                       # ReduxçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ slices/
â”‚   â”‚   â”‚   â”œâ”€â”€ authSlice.ts         # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ userSlice.ts         # ç”¨æˆ·çŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ homeSlice.ts         # é¦–é¡µçŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ communitySlice.ts    # ç¤¾åŒºçŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ publishSlice.ts      # å‘å¸ƒçŠ¶æ€
â”‚   â”‚   â”‚   â”œâ”€â”€ messageSlice.ts      # æ¶ˆæ¯çŠ¶æ€
â”‚   â”‚   â”‚   â””â”€â”€ profileSlice.ts      # ä¸ªäººçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ index.ts                 # Storeé…ç½®
â”‚   â”‚   â””â”€â”€ hooks.ts                 # Redux Hooks
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                    # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ api/                     # APIæ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts              # è®¤è¯æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts              # ç”¨æˆ·æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ post.ts              # åŠ¨æ€æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ topic.ts             # è¯é¢˜æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ message.ts           # æ¶ˆæ¯æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.ts            # ä¸Šä¼ æ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ socket/                  # WebSocket
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts             # Socketè¿æ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ events.ts            # äº‹ä»¶å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ handlers.ts          # äº‹ä»¶å¤„ç†
â”‚   â”‚   â””â”€â”€ request.ts               # HTTPè¯·æ±‚å°è£…
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                       # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ useAuth.ts               # è®¤è¯Hook
â”‚   â”‚   â”œâ”€â”€ useSocket.ts             # Socket Hook
â”‚   â”‚   â”œâ”€â”€ useFeed.ts               # å†…å®¹æµHook
â”‚   â”‚   â”œâ”€â”€ usePost.ts               # åŠ¨æ€Hook
â”‚   â”‚   â”œâ”€â”€ useChat.ts               # èŠå¤©Hook
â”‚   â”‚   â”œâ”€â”€ useInfiniteScroll.ts     # æ— é™æ»šåŠ¨Hook
â”‚   â”‚   â”œâ”€â”€ useDebounce.ts           # é˜²æŠ–Hook
â”‚   â”‚   â””â”€â”€ useThrottle.ts           # èŠ‚æµHook
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                       # å·¥å…·ç±»ï¼ˆSSå‰ç¼€ï¼‰
â”‚   â”‚   â”œâ”€â”€ SSTimeUtil.ts            # æ—¶é—´å·¥å…·
â”‚   â”‚   â”œâ”€â”€ SSStringUtil.ts          # å­—ç¬¦ä¸²å·¥å…·
â”‚   â”‚   â”œâ”€â”€ SSValidateUtil.ts        # éªŒè¯å·¥å…·
â”‚   â”‚   â”œâ”€â”€ SSStorageUtil.ts         # å­˜å‚¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ SSDictUtil.ts            # å­—å…¸å·¥å…·
â”‚   â”‚   â”œâ”€â”€ SSFileUtil.ts            # æ–‡ä»¶å·¥å…·
â”‚   â”‚   â”œâ”€â”€ SSImageUtil.ts           # å›¾ç‰‡å·¥å…·
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                       # TypeScriptç±»å‹
â”‚   â”‚   â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ post.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ topic.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ message.ts
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ api.ts                   # APIç±»å‹
â”‚   â”‚   â”œâ”€â”€ common.ts                # å…¬å…±ç±»å‹
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ constants/                   # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ index.ts                 # é€šç”¨å¸¸é‡
â”‚   â”‚   â”œâ”€â”€ routes.ts                # è·¯ç”±å¸¸é‡
â”‚   â”‚   â””â”€â”€ enums.ts                 # æšä¸¾å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ router/                      # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ index.tsx                # è·¯ç”±å…¥å£
â”‚   â”‚   â””â”€â”€ routes.tsx               # è·¯ç”±å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ index.ts                 # é…ç½®å…¥å£
â”‚   â”‚   â””â”€â”€ env.ts                   # ç¯å¢ƒå˜é‡
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                      # åº”ç”¨æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx                     # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ vite-env.d.ts
â”‚
â”œâ”€â”€ .env.development                 # å¼€å‘ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.production                  # ç”Ÿäº§ç¯å¢ƒå˜é‡
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .eslintrc.cjs
â”œâ”€â”€ .prettierrc
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â””â”€â”€ README.md
```

---

## 4. æ ¸å¿ƒæ¨¡å—è®¾è®¡

## 4.1 é¦–é¡µæ¨¡å—

### 4.1.1 æ¨¡å—æ¦‚è¿°

é¦–é¡µæ˜¯ç”¨æˆ·è¿›å…¥åº”ç”¨åçš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼Œå±•ç¤ºä¸ªæ€§åŒ–æ¨èå†…å®¹ã€å¥½å‹åŠ¨æ€ã€çƒ­é—¨è¯é¢˜ç­‰ã€‚

### 4.1.2 åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | æè¿° |
|------|--------|------|
| æ¨èå†…å®¹æµ | P0 | åŸºäºç®—æ³•çš„ä¸ªæ€§åŒ–å†…å®¹æ¨è |
| ä¸‹æ‹‰åˆ·æ–° | P0 | åˆ·æ–°è·å–æœ€æ–°å†…å®¹ |
| ä¸Šæ‹‰åŠ è½½ | P0 | æ— é™æ»šåŠ¨åŠ è½½æ›´å¤š |
| å†…å®¹äº’åŠ¨ | P0 | ç‚¹èµã€è¯„è®ºã€åˆ†äº« |
| çƒ­é—¨è¯é¢˜ | P1 | å±•ç¤ºçƒ­é—¨è¯é¢˜æ ‡ç­¾ |
| æ¨èç”¨æˆ· | P1 | æ¨èå¯èƒ½æ„Ÿå…´è¶£çš„ç”¨æˆ· |
| æœç´¢å…¥å£ | P1 | å…¨å±€æœç´¢åŠŸèƒ½å…¥å£ |
| å†…å®¹ç­›é€‰ | P2 | æŒ‰ç±»å‹ç­›é€‰å†…å®¹ï¼ˆå›¾æ–‡/è§†é¢‘ï¼‰ |

### 4.1.3 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NavBar (é¡¶éƒ¨å¯¼èˆª)               â”‚
â”‚  [Logo] [æœç´¢] [é€šçŸ¥]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  HotTopics (çƒ­é—¨è¯é¢˜)            â”‚
â”‚  [#è¯é¢˜1] [#è¯é¢˜2] [#è¯é¢˜3]      â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  FeedList (å†…å®¹æµ)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ FeedItem                â”‚   â”‚
â”‚  â”‚  [å¤´åƒ] [ç”¨æˆ·å] [æ—¶é—´]  â”‚   â”‚
â”‚  â”‚  [å†…å®¹æ–‡å­—]              â”‚   â”‚
â”‚  â”‚  [å›¾ç‰‡/è§†é¢‘]             â”‚   â”‚
â”‚  â”‚  [â¤ï¸ç‚¹èµ] [ğŸ’¬è¯„è®º] [ğŸ”—åˆ†äº«] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ FeedItem                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ...                            â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TabBar (åº•éƒ¨å¯¼èˆª)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.1.4 ç»„ä»¶è®¾è®¡

#### ä¸»ç»„ä»¶ï¼ˆviews/Home/index.tsxï¼‰
```typescript
export const Home: React.FC = () => {
  const { feeds, loading, hasMore, loadMore, refresh } = useFeed();

  return (
    <div className={styles.home}>
      <NavBar />
      <PullRefresh onRefresh={refresh}>
        <HotTopics />
        <FeedList
          feeds={feeds}
          loading={loading}
          hasMore={hasMore}
          onLoadMore={loadMore}
        />
      </PullRefresh>
    </div>
  );
};
```

#### FeedItemç»„ä»¶ï¼ˆå†…å®¹æµå•é¡¹ï¼‰
```typescript
interface FeedItemProps {
  feed: Feed;
  onLike: (feedId: string) => void;
  onComment: (feedId: string) => void;
  onShare: (feedId: string) => void;
}

export const FeedItem: React.FC<FeedItemProps> = ({
  feed,
  onLike,
  onComment,
  onShare
}) => {
  return (
    <div className={styles.feedItem}>
      <FeedHeader user={feed.user} time={feed.createdAt} />
      <FeedContent content={feed.content} images={feed.images} />
      <FeedActions
        likeCount={feed.likeCount}
        commentCount={feed.commentCount}
        isLiked={feed.isLiked}
        onLike={() => onLike(feed.id)}
        onComment={() => onComment(feed.id)}
        onShare={() => onShare(feed.id)}
      />
    </div>
  );
};
```

### 4.1.5 çŠ¶æ€ç®¡ç†ï¼ˆhomeSlice.tsï¼‰

```typescript
interface HomeState {
  feeds: Feed[];
  page: number;
  pageSize: number;
  hasMore: boolean;
  loading: boolean;
  refreshing: boolean;
  hotTopics: Topic[];
  recommendUsers: User[];
}

export const homeSlice = createSlice({
  name: 'home',
  initialState,
  reducers: {
    setFeeds: (state, action) => {
      state.feeds = action.payload;
    },
    appendFeeds: (state, action) => {
      state.feeds.push(...action.payload);
    },
    updateFeed: (state, action) => {
      const index = state.feeds.findIndex(f => f.id === action.payload.id);
      if (index !== -1) {
        state.feeds[index] = action.payload;
      }
    },
    toggleLike: (state, action) => {
      const feed = state.feeds.find(f => f.id === action.payload);
      if (feed) {
        feed.isLiked = !feed.isLiked;
        feed.likeCount += feed.isLiked ? 1 : -1;
      }
    }
  }
});
```

### 4.1.6 APIæ¥å£

```typescript
// services/api/post.ts
export const postApi = {
  // è·å–æ¨èå†…å®¹æµ
  getFeeds: (params: { page: number; pageSize: number }) =>
    axios.get<Feed[]>('/api/v1/posts/feeds', { params }),

  // ç‚¹èµåŠ¨æ€
  likePost: (postId: string) =>
    axios.post(`/api/v1/posts/${postId}/like`),

  // å–æ¶ˆç‚¹èµ
  unlikePost: (postId: string) =>
    axios.delete(`/api/v1/posts/${postId}/like`),

  // è·å–åŠ¨æ€è¯¦æƒ…
  getPostDetail: (postId: string) =>
    axios.get<Post>(`/api/v1/posts/${postId}`)
};
```

---

## 4.2 ç¤¾åŒºæ¨¡å—

### 4.2.1 æ¨¡å—æ¦‚è¿°

ç¤¾åŒºæ¨¡å—æ˜¯ç”¨æˆ·å‘ç°å…´è¶£è¯é¢˜ã€åŠ å…¥åœˆå­ã€æµè§ˆè¯é¢˜å†…å®¹çš„æ ¸å¿ƒåŒºåŸŸã€‚

### 4.2.2 åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | æè¿° |
|------|--------|------|
| è¯é¢˜å¹¿åœº | P0 | å±•ç¤ºæ‰€æœ‰è¯é¢˜åˆ†ç±» |
| è¯é¢˜åˆ—è¡¨ | P0 | åˆ†ç±»ä¸‹çš„è¯é¢˜åˆ—è¡¨ |
| è¯é¢˜è¯¦æƒ… | P0 | è¯é¢˜ä»‹ç»ã€æˆå‘˜ã€å†…å®¹ |
| å…³æ³¨è¯é¢˜ | P0 | å…³æ³¨/å–æ¶ˆå…³æ³¨è¯é¢˜ |
| è¯é¢˜å†…å®¹æµ | P0 | è¯é¢˜ä¸‹çš„å¸–å­åˆ—è¡¨ |
| è¯é¢˜æœç´¢ | P1 | æœç´¢æ„Ÿå…´è¶£çš„è¯é¢˜ |
| æ¨èè¯é¢˜ | P1 | ä¸ªæ€§åŒ–è¯é¢˜æ¨è |
| çƒ­é—¨è¯é¢˜æ¦œ | P1 | çƒ­åº¦æ’è¡Œæ¦œ |
| ç”¨æˆ·å‘ç° | P2 | å‘ç°ç›¸åŒå…´è¶£ç”¨æˆ· |

### 4.2.3 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NavBar                         â”‚
â”‚  [ç¤¾åŒº] [æœç´¢]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TabBar (åˆ†ç±»Tab)                â”‚
â”‚  [æ¨è] [å…³æ³¨] [çƒ­é—¨]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  TopicList (è¯é¢˜åˆ—è¡¨)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ TopicCard               â”‚   â”‚
â”‚  â”‚  [è¯é¢˜å°é¢]              â”‚   â”‚
â”‚  â”‚  [è¯é¢˜åç§°]              â”‚   â”‚
â”‚  â”‚  [è¯é¢˜æè¿°]              â”‚   â”‚
â”‚  â”‚  [å‚ä¸äººæ•°] [å…³æ³¨æŒ‰é’®]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ TopicCard               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ...                            â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2.4 ç»„ä»¶è®¾è®¡

#### TopicCardç»„ä»¶ï¼ˆè¯é¢˜å¡ç‰‡ï¼‰
```typescript
interface TopicCardProps {
  topic: Topic;
  onFollow: (topicId: string) => void;
  onClick: (topicId: string) => void;
}

export const TopicCard: React.FC<TopicCardProps> = ({
  topic,
  onFollow,
  onClick
}) => {
  return (
    <div className={styles.topicCard} onClick={() => onClick(topic.id)}>
      <div className={styles.cover}>
        <img src={topic.cover} alt={topic.name} />
      </div>
      <div className={styles.info}>
        <h3>{topic.name}</h3>
        <p>{topic.description}</p>
        <div className={styles.meta}>
          <span>{topic.memberCount} å‚ä¸</span>
          <Button
            size="small"
            type={topic.isFollowed ? 'default' : 'primary'}
            onClick={(e) => {
              e.stopPropagation();
              onFollow(topic.id);
            }}
          >
            {topic.isFollowed ? 'å·²å…³æ³¨' : 'å…³æ³¨'}
          </Button>
        </div>
      </div>
    </div>
  );
};
```

#### TopicDetailç»„ä»¶ï¼ˆè¯é¢˜è¯¦æƒ…ï¼‰
```typescript
export const TopicDetail: React.FC = () => {
  const { id } = useParams();
  const { topic, posts, loading } = useTopicDetail(id);

  return (
    <div className={styles.topicDetail}>
      <NavBar back title={topic?.name} />

      <TopicHeader topic={topic} />

      <Tabs>
        <Tabs.Tab title="æœ€æ–°" key="latest">
          <PostList posts={posts} />
        </Tabs.Tab>
        <Tabs.Tab title="çƒ­é—¨" key="hot">
          <PostList posts={posts} />
        </Tabs.Tab>
      </Tabs>
    </div>
  );
};
```

### 4.2.5 çŠ¶æ€ç®¡ç†ï¼ˆcommunitySlice.tsï¼‰

```typescript
interface CommunityState {
  topics: Topic[];
  followedTopics: Topic[];
  hotTopics: Topic[];
  currentTopic: Topic | null;
  topicPosts: {
    [topicId: string]: Post[];
  };
  loading: boolean;
}
```

### 4.2.6 APIæ¥å£

```typescript
// services/api/topic.ts
export const topicApi = {
  // è·å–è¯é¢˜åˆ—è¡¨
  getTopics: (params: { category?: string; page: number }) =>
    axios.get<Topic[]>('/api/v1/topics', { params }),

  // è·å–è¯é¢˜è¯¦æƒ…
  getTopicDetail: (topicId: string) =>
    axios.get<Topic>(`/api/v1/topics/${topicId}`),

  // å…³æ³¨è¯é¢˜
  followTopic: (topicId: string) =>
    axios.post(`/api/v1/topics/${topicId}/follow`),

  // å–æ¶ˆå…³æ³¨è¯é¢˜
  unfollowTopic: (topicId: string) =>
    axios.delete(`/api/v1/topics/${topicId}/follow`),

  // è·å–è¯é¢˜ä¸‹çš„å¸–å­
  getTopicPosts: (topicId: string, params: { page: number }) =>
    axios.get<Post[]>(`/api/v1/topics/${topicId}/posts`, { params })
};
```

---

## 4.3 å‘å¸ƒæ¨¡å—

### 4.3.1 æ¨¡å—æ¦‚è¿°

å‘å¸ƒæ¨¡å—æ”¯æŒç”¨æˆ·åˆ›ä½œå’Œå‘å¸ƒå¤šç§ç±»å‹çš„å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ç­‰ã€‚

### 4.3.2 åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | æè¿° |
|------|--------|------|
| æ–‡å­—å‘å¸ƒ | P0 | çº¯æ–‡å­—å†…å®¹å‘å¸ƒ |
| å›¾ç‰‡å‘å¸ƒ | P0 | å›¾æ–‡å†…å®¹å‘å¸ƒï¼ˆæœ€å¤š9å¼ ï¼‰ |
| è§†é¢‘å‘å¸ƒ | P0 | è§†é¢‘å†…å®¹å‘å¸ƒ |
| å›¾ç‰‡ç¼–è¾‘ | P1 | è£å‰ªã€æ»¤é•œã€è´´çº¸ |
| æ·»åŠ è¯é¢˜ | P1 | å…³è”è¯é¢˜æ ‡ç­¾ |
| @å¥½å‹ | P1 | æåŠå¥½å‹ |
| ä½ç½®æ ‡è®° | P1 | æ·»åŠ åœ°ç†ä½ç½® |
| æƒé™è®¾ç½® | P0 | å…¬å¼€/å¥½å‹å¯è§/ç§å¯† |
| è‰ç¨¿ä¿å­˜ | P2 | ä¿å­˜æœªå‘å¸ƒå†…å®¹ |

### 4.3.3 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NavBar                         â”‚
â”‚  [å–æ¶ˆ] [å‘å¸ƒ]   [å‘é€æŒ‰é’®]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  TextInput (æ–‡å­—è¾“å…¥)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ åˆ†äº«æ–°é²œäº‹...            â”‚   â”‚
â”‚  â”‚                         â”‚   â”‚
â”‚  â”‚                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚
â”‚  MediaPreview (åª’ä½“é¢„è§ˆ)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚å›¾ç‰‡1 â”‚ â”‚å›¾ç‰‡2 â”‚ â”‚ + â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                 â”‚
â”‚  Toolbar (å·¥å…·æ )                â”‚
â”‚  [ğŸ“·å›¾ç‰‡] [ğŸ¬è§†é¢‘] [#è¯é¢˜] [@å¥½å‹] [ğŸ“ä½ç½®] â”‚
â”‚                                 â”‚
â”‚  Settings (å‘å¸ƒè®¾ç½®)             â”‚
â”‚  è°å¯ä»¥çœ‹: [å…¬å¼€ â–¼]              â”‚
â”‚  ä½ç½®: [æ·»åŠ ä½ç½®]                â”‚
â”‚  è¯é¢˜: [#é€‰æ‹©è¯é¢˜]               â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3.4 ç»„ä»¶è®¾è®¡

#### PublishTypeç»„ä»¶ï¼ˆå‘å¸ƒç±»å‹é€‰æ‹©ï¼‰
```typescript
export const PublishType: React.FC = () => {
  const navigate = useNavigate();

  const types = [
    { icon: 'ğŸ“', label: 'æ–‡å­—', path: '/publish/text' },
    { icon: 'ğŸ“·', label: 'å›¾ç‰‡', path: '/publish/image' },
    { icon: 'ğŸ¬', label: 'è§†é¢‘', path: '/publish/video' }
  ];

  return (
    <div className={styles.publishType}>
      <div className={styles.typeGrid}>
        {types.map(type => (
          <div
            key={type.path}
            className={styles.typeItem}
            onClick={() => navigate(type.path)}
          >
            <div className={styles.icon}>{type.icon}</div>
            <span>{type.label}</span>
          </div>
        ))}
      </div>
    </div>
  );
};
```

#### ImagePostç»„ä»¶ï¼ˆå›¾ç‰‡å‘å¸ƒï¼‰
```typescript
export const ImagePost: React.FC = () => {
  const [content, setContent] = useState('');
  const [images, setImages] = useState<File[]>([]);
  const [topic, setTopic] = useState<string>('');
  const [visibility, setVisibility] = useState<'public' | 'friends' | 'private'>('public');

  const handleUploadImage = (files: File[]) => {
    if (images.length + files.length > 9) {
      SSDialog.toast('æœ€å¤šåªèƒ½ä¸Šä¼ 9å¼ å›¾ç‰‡', 'warning');
      return;
    }
    setImages([...images, ...files]);
  };

  const handlePublish = async () => {
    if (!content && images.length === 0) {
      SSDialog.toast('è¯·è¾“å…¥å†…å®¹æˆ–ä¸Šä¼ å›¾ç‰‡', 'warning');
      return;
    }

    try {
      // ä¸Šä¼ å›¾ç‰‡
      const imageUrls = await uploadImages(images);

      // å‘å¸ƒåŠ¨æ€
      await postApi.createPost({
        content,
        images: imageUrls,
        topic,
        visibility
      });

      SSDialog.toast('å‘å¸ƒæˆåŠŸ', 'success');
      navigate('/home');
    } catch (error) {
      SSDialog.toast('å‘å¸ƒå¤±è´¥', 'error');
    }
  };

  return (
    <div className={styles.imagePost}>
      <NavBar
        back
        title="å‘å¸ƒå›¾ç‰‡"
        right={
          <Button onClick={handlePublish}>å‘å¸ƒ</Button>
        }
      />

      <TextArea
        placeholder="åˆ†äº«æ–°é²œäº‹..."
        value={content}
        onChange={setContent}
        maxLength={500}
      />

      <ImageUpload
        images={images}
        onChange={setImages}
        maxCount={9}
      />

      <PublishSettings
        topic={topic}
        visibility={visibility}
        onTopicChange={setTopic}
        onVisibilityChange={setVisibility}
      />
    </div>
  );
};
```

### 4.3.5 çŠ¶æ€ç®¡ç†ï¼ˆpublishSlice.tsï¼‰

```typescript
interface PublishState {
  draft: {
    content: string;
    images: string[];
    video?: string;
    topic?: string;
    visibility: 'public' | 'friends' | 'private';
  } | null;
  uploading: boolean;
  uploadProgress: number;
}
```

### 4.3.6 APIæ¥å£

```typescript
// services/api/post.ts
export const postApi = {
  // åˆ›å»ºåŠ¨æ€
  createPost: (data: CreatePostDto) =>
    axios.post<Post>('/api/v1/posts', data),

  // ä¸Šä¼ å›¾ç‰‡
  uploadImages: (files: File[]) =>
    axios.post<string[]>('/api/v1/upload/images', files),

  // ä¸Šä¼ è§†é¢‘
  uploadVideo: (file: File) =>
    axios.post<string>('/api/v1/upload/video', file)
};
```

---

## 4.4 æ¶ˆæ¯æ¨¡å—

### 4.4.1 æ¨¡å—æ¦‚è¿°

æ¶ˆæ¯æ¨¡å—æä¾›ç§èŠã€ç¾¤èŠã€ç³»ç»Ÿé€šçŸ¥ç­‰å³æ—¶é€šè®¯åŠŸèƒ½ã€‚

### 4.4.2 åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | æè¿° |
|------|--------|------|
| ä¼šè¯åˆ—è¡¨ | P0 | æ˜¾ç¤ºæ‰€æœ‰èŠå¤©ä¼šè¯ |
| ç§èŠ | P0 | ä¸€å¯¹ä¸€èŠå¤© |
| ç¾¤èŠ | P0 | ç¾¤ç»„èŠå¤© |
| æ–‡å­—æ¶ˆæ¯ | P0 | å‘é€æ¥æ”¶æ–‡å­— |
| å›¾ç‰‡æ¶ˆæ¯ | P0 | å‘é€æ¥æ”¶å›¾ç‰‡ |
| è¯­éŸ³æ¶ˆæ¯ | P1 | å‘é€æ¥æ”¶è¯­éŸ³ |
| è§†é¢‘æ¶ˆæ¯ | P1 | å‘é€æ¥æ”¶è§†é¢‘ |
| æ¶ˆæ¯æ’¤å› | P1 | 2åˆ†é’Ÿå†…æ’¤å› |
| æ¶ˆæ¯å·²è¯» | P0 | å·²è¯»æœªè¯»çŠ¶æ€ |
| æ¶ˆæ¯æœç´¢ | P2 | æœç´¢èŠå¤©è®°å½• |
| ç³»ç»Ÿé€šçŸ¥ | P0 | ç³»ç»Ÿæ¶ˆæ¯æ¨é€ |

### 4.4.3 é¡µé¢ç»“æ„

**ä¼šè¯åˆ—è¡¨é¡µ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NavBar                         â”‚
â”‚  [æ¶ˆæ¯]              [+æ–°å»º]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SearchBar (æœç´¢)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ConversationList               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [å¤´åƒ] å¼ ä¸‰              â”‚   â”‚
â”‚  â”‚        ä½ å¥½               â”‚   â”‚
â”‚  â”‚        10:30  [2]        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [ç¾¤å¤´åƒ] å·¥ä½œç¾¤          â”‚   â”‚
â”‚  â”‚          æå››: æ”¶åˆ°      â”‚   â”‚
â”‚  â”‚          æ˜¨å¤©             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ...                            â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**èŠå¤©å®¤é¡µ**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NavBar                         â”‚
â”‚  [<è¿”å›] å¼ ä¸‰         [â€¢â€¢â€¢]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  MessageList (æ¶ˆæ¯åˆ—è¡¨)          â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ å¯¹æ–¹æ¶ˆæ¯æ°”æ³¡     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚            â”‚ æˆ‘çš„æ¶ˆæ¯æ°”æ³¡     â”‚  â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ [å›¾ç‰‡æ¶ˆæ¯]       â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MessageInput (è¾“å…¥æ¡†)           â”‚
â”‚  [ğŸ¤] [æ–‡å­—è¾“å…¥æ¡†...] [ğŸ˜Š] [ğŸ“·]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4.4 ç»„ä»¶è®¾è®¡

#### ConversationItemç»„ä»¶ï¼ˆä¼šè¯é¡¹ï¼‰
```typescript
interface ConversationItemProps {
  conversation: Conversation;
  onClick: (id: string) => void;
}

export const ConversationItem: React.FC<ConversationItemProps> = ({
  conversation,
  onClick
}) => {
  return (
    <div
      className={styles.conversationItem}
      onClick={() => onClick(conversation.id)}
    >
      <Avatar src={conversation.avatar} size={48} />

      <div className={styles.content}>
        <div className={styles.header}>
          <span className={styles.name}>{conversation.name}</span>
          <span className={styles.time}>
            {SSTimeUtil.relative(conversation.lastMessageAt)}
          </span>
        </div>

        <div className={styles.footer}>
          <span className={styles.lastMessage}>
            {conversation.lastMessage}
          </span>
          {conversation.unreadCount > 0 && (
            <Badge count={conversation.unreadCount} />
          )}
        </div>
      </div>
    </div>
  );
};
```

#### MessageBubbleç»„ä»¶ï¼ˆæ¶ˆæ¯æ°”æ³¡ï¼‰
```typescript
interface MessageBubbleProps {
  message: Message;
  isMine: boolean;
}

export const MessageBubble: React.FC<MessageBubbleProps> = ({
  message,
  isMine
}) => {
  const renderContent = () => {
    switch (message.type) {
      case 'text':
        return <div className={styles.text}>{message.content}</div>;
      case 'image':
        return <img src={message.content} alt="" />;
      case 'video':
        return <video src={message.content} controls />;
      case 'audio':
        return <AudioPlayer src={message.content} />;
      default:
        return null;
    }
  };

  return (
    <div className={classNames(styles.messageBubble, {
      [styles.mine]: isMine,
      [styles.other]: !isMine
    })}>
      {!isMine && <Avatar src={message.sender.avatar} size={36} />}

      <div className={styles.bubble}>
        {renderContent()}
        <div className={styles.status}>
          {message.status === 'read' && isMine && 'å·²è¯»'}
        </div>
      </div>

      {isMine && <Avatar src={message.sender.avatar} size={36} />}
    </div>
  );
};
```

#### MessageInputç»„ä»¶ï¼ˆæ¶ˆæ¯è¾“å…¥æ¡†ï¼‰
```typescript
export const MessageInput: React.FC = () => {
  const [text, setText] = useState('');
  const [showToolbar, setShowToolbar] = useState(false);

  const handleSend = async () => {
    if (!text.trim()) return;

    await sendMessage({ type: 'text', content: text });
    setText('');
  };

  return (
    <div className={styles.messageInput}>
      <Button icon={<MicIcon />} onClick={() => {/* è¯­éŸ³ */}} />

      <Input
        value={text}
        onChange={setText}
        placeholder="è¯·è¾“å…¥æ¶ˆæ¯..."
        onFocus={() => setShowToolbar(false)}
      />

      <Button icon={<EmojiIcon />} onClick={() => setShowToolbar(!showToolbar)} />
      <Button icon={<ImageIcon />} onClick={() => {/* å›¾ç‰‡ */}} />

      {text ? (
        <Button type="primary" onClick={handleSend}>å‘é€</Button>
      ) : null}

      {showToolbar && (
        <Toolbar
          onImage={() => {/* é€‰æ‹©å›¾ç‰‡ */}}
          onVideo={() => {/* é€‰æ‹©è§†é¢‘ */}}
          onFile={() => {/* é€‰æ‹©æ–‡ä»¶ */}}
        />
      )}
    </div>
  );
};
```

### 4.4.5 çŠ¶æ€ç®¡ç†ï¼ˆmessageSlice.tsï¼‰

```typescript
interface MessageState {
  conversations: Conversation[];
  currentConversation: string | null;
  messages: {
    [conversationId: string]: Message[];
  };
  unreadCount: number;
  onlineUsers: string[];
  typing: {
    [conversationId: string]: string[];
  };
}
```

### 4.4.6 WebSocketäº‹ä»¶

```typescript
// services/socket/events.ts
export enum SocketEvent {
  // è¿æ¥äº‹ä»¶
  CONNECT = 'connect',
  DISCONNECT = 'disconnect',

  // æ¶ˆæ¯äº‹ä»¶
  MESSAGE_NEW = 'message:new',
  MESSAGE_READ = 'message:read',
  MESSAGE_DELIVERED = 'message:delivered',
  MESSAGE_RECALLED = 'message:recalled',

  // ç”¨æˆ·äº‹ä»¶
  USER_ONLINE = 'user:online',
  USER_OFFLINE = 'user:offline',
  USER_TYPING = 'user:typing'
}

// æ¶ˆæ¯å‘é€
socket.emit('message:send', {
  conversationId,
  type: 'text',
  content: 'Hello'
});

// æ¥æ”¶æ–°æ¶ˆæ¯
socket.on('message:new', (message: Message) => {
  dispatch(addMessage(message));
});
```

---

## 4.5 æˆ‘çš„æ¨¡å—

### 4.5.1 æ¨¡å—æ¦‚è¿°

ä¸ªäººä¸­å¿ƒæ¨¡å—å±•ç¤ºç”¨æˆ·ä¿¡æ¯ã€ä¸ªäººåŠ¨æ€ã€å¥½å‹åˆ—è¡¨ï¼Œæä¾›è´¦å·è®¾ç½®ã€éšç§ç®¡ç†ç­‰åŠŸèƒ½ã€‚

### 4.5.2 åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | æè¿° |
|------|--------|------|
| ä¸ªäººä¿¡æ¯å±•ç¤º | P0 | å¤´åƒã€æ˜µç§°ã€ç­¾åç­‰ |
| æˆ‘çš„åŠ¨æ€ | P0 | å‘å¸ƒçš„æ‰€æœ‰åŠ¨æ€ |
| æˆ‘çš„å¥½å‹ | P0 | å¥½å‹åˆ—è¡¨ |
| æˆ‘çš„å…³æ³¨ | P1 | å…³æ³¨çš„ç”¨æˆ·/è¯é¢˜ |
| æˆ‘çš„ç²‰ä¸ | P1 | ç²‰ä¸åˆ—è¡¨ |
| ç¼–è¾‘èµ„æ–™ | P0 | ä¿®æ”¹ä¸ªäººä¿¡æ¯ |
| è´¦å·è®¾ç½® | P0 | å¯†ç ã€ç»‘å®šæ‰‹æœºç­‰ |
| éšç§è®¾ç½® | P1 | è°å¯ä»¥çœ‹ã€é»‘åå• |
| é€šç”¨è®¾ç½® | P1 | é€šçŸ¥ã€è¯­è¨€ç­‰ |
| å…³äºæˆ‘ä»¬ | P2 | ç‰ˆæœ¬ã€åè®®ç­‰ |

### 4.5.3 é¡µé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProfileHeader (ä¸ªäººä¿¡æ¯å¡ç‰‡)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  [èƒŒæ™¯å›¾]                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”                  â”‚  â”‚
â”‚  â”‚  â”‚å¤´åƒ  â”‚ å¼ ä¸‰              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ è¿™æ˜¯æˆ‘çš„ä¸ªæ€§ç­¾å  â”‚  â”‚
â”‚  â”‚  [å…³æ³¨ 100] [ç²‰ä¸ 200]     â”‚  â”‚
â”‚  â”‚  [ç¼–è¾‘èµ„æ–™]                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Stats (æ•°æ®ç»Ÿè®¡)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”          â”‚
â”‚  â”‚ 50 â”‚ â”‚ 20 â”‚ â”‚ 30 â”‚          â”‚
â”‚  â”‚åŠ¨æ€â”‚ â”‚æ”¶è—â”‚ â”‚èµè¿‡â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MenuList (åŠŸèƒ½èœå•)             â”‚
â”‚  [ğŸ‘¥ æˆ‘çš„å¥½å‹]        [>]        â”‚
â”‚  [â­ æˆ‘çš„æ”¶è—]        [>]        â”‚
â”‚  [ğŸ·ï¸ æˆ‘çš„è¯é¢˜]        [>]        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  [âš™ï¸ è®¾ç½®]            [>]        â”‚
â”‚  [â“ å¸®åŠ©ä¸åé¦ˆ]      [>]        â”‚
â”‚  [â„¹ï¸ å…³äº]            [>]        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  [é€€å‡ºç™»å½•]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.5.4 ç»„ä»¶è®¾è®¡

#### UserInfoç»„ä»¶ï¼ˆç”¨æˆ·ä¿¡æ¯å¡ç‰‡ï¼‰
```typescript
interface UserInfoProps {
  user: User;
  onEdit: () => void;
}

export const UserInfo: React.FC<UserInfoProps> = ({ user, onEdit }) => {
  return (
    <div className={styles.userInfo}>
      <div
        className={styles.background}
        style={{ backgroundImage: `url(${user.backgroundImage})` }}
      />

      <div className={styles.content}>
        <Avatar src={user.avatar} size={80} />

        <div className={styles.info}>
          <h2>{user.nickname}</h2>
          <p>{user.signature || 'è¿™ä¸ªäººå¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡ç•™ä¸‹'}</p>

          <div className={styles.stats}>
            <div className={styles.stat}>
              <span className={styles.count}>{user.followingCount}</span>
              <span className={styles.label}>å…³æ³¨</span>
            </div>
            <div className={styles.stat}>
              <span className={styles.count}>{user.followerCount}</span>
              <span className={styles.label}>ç²‰ä¸</span>
            </div>
          </div>

          <Button onClick={onEdit}>ç¼–è¾‘èµ„æ–™</Button>
        </div>
      </div>
    </div>
  );
};
```

#### Settingsç»„ä»¶ï¼ˆè®¾ç½®é¡µé¢ï¼‰
```typescript
export const Settings: React.FC = () => {
  const navigate = useNavigate();
  const dispatch = useDispatch();

  const handleLogout = async () => {
    const confirmed = await SSDialog.confirm({
      title: 'ç¡®è®¤é€€å‡º',
      content: 'ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ'
    });

    if (confirmed) {
      await authApi.logout();
      dispatch(logout());
      navigate('/login');
    }
  };

  return (
    <div className={styles.settings}>
      <NavBar back title="è®¾ç½®" />

      <List>
        <List.Item
          prefix={<UserIcon />}
          onClick={() => navigate('/settings/account')}
          arrow
        >
          è´¦å·è®¾ç½®
        </List.Item>

        <List.Item
          prefix={<LockIcon />}
          onClick={() => navigate('/settings/privacy')}
          arrow
        >
          éšç§è®¾ç½®
        </List.Item>

        <List.Item
          prefix={<BellIcon />}
          onClick={() => navigate('/settings/notification')}
          arrow
        >
          é€šçŸ¥è®¾ç½®
        </List.Item>

        <List.Item
          prefix={<InfoIcon />}
          onClick={() => navigate('/settings/about')}
          arrow
        >
          å…³äºæˆ‘ä»¬
        </List.Item>
      </List>

      <div className={styles.logoutSection}>
        <Button block danger onClick={handleLogout}>
          é€€å‡ºç™»å½•
        </Button>
      </div>
    </div>
  );
};
```

### 4.5.5 çŠ¶æ€ç®¡ç†ï¼ˆprofileSlice.tsï¼‰

```typescript
interface ProfileState {
  userInfo: User | null;
  myPosts: Post[];
  myFriends: User[];
  favorites: Post[];
  followedTopics: Topic[];
  stats: {
    postCount: number;
    favoriteCount: number;
    likeCount: number;
  };
}
```

### 4.5.6 APIæ¥å£

```typescript
// services/api/user.ts
export const userApi = {
  // è·å–ä¸ªäººä¿¡æ¯
  getProfile: () =>
    axios.get<User>('/api/v1/users/me'),

  // æ›´æ–°ä¸ªäººä¿¡æ¯
  updateProfile: (data: UpdateProfileDto) =>
    axios.put<User>('/api/v1/users/me', data),

  // ä¸Šä¼ å¤´åƒ
  uploadAvatar: (file: File) =>
    axios.post<string>('/api/v1/users/avatar', file),

  // è·å–æˆ‘çš„åŠ¨æ€
  getMyPosts: (params: { page: number }) =>
    axios.get<Post[]>('/api/v1/users/me/posts', { params }),

  // è·å–æˆ‘çš„å¥½å‹
  getMyFriends: () =>
    axios.get<User[]>('/api/v1/users/me/friends')
};
```

---

## 5. è·¯ç”±è®¾è®¡

### 5.1 è·¯ç”±é…ç½®

```typescript
// router/routes.tsx
import { lazy } from 'react';

// æ‡’åŠ è½½é¡µé¢ç»„ä»¶
const Home = lazy(() => import('@/views/Home'));
const Community = lazy(() => import('@/views/Community'));
const Publish = lazy(() => import('@/views/Publish'));
const Message = lazy(() => import('@/views/Message'));
const Profile = lazy(() => import('@/views/Profile'));

export const routes = [
  {
    path: '/',
    element: <MainLayout />,
    children: [
      {
        index: true,
        element: <Navigate to="/home" replace />
      },
      {
        path: 'home',
        element: <Home />
      },
      {
        path: 'community',
        element: <Community />,
        children: [
          {
            path: 'topic/:id',
            element: <TopicDetail />
          }
        ]
      },
      {
        path: 'publish',
        element: <Publish />,
        children: [
          { path: 'text', element: <TextPost /> },
          { path: 'image', element: <ImagePost /> },
          { path: 'video', element: <VideoPost /> }
        ]
      },
      {
        path: 'message',
        element: <Message />,
        children: [
          {
            path: 'chat/:id',
            element: <ChatRoom />
          },
          {
            path: 'group/:id',
            element: <GroupChat />
          }
        ]
      },
      {
        path: 'profile',
        element: <Profile />,
        children: [
          { path: 'edit', element: <EditProfile /> },
          { path: 'posts', element: <MyPosts /> },
          { path: 'friends', element: <MyFriends /> },
          { path: 'settings', element: <Settings /> }
        ]
      }
    ]
  },
  {
    path: '/auth',
    element: <AuthLayout />,
    children: [
      { path: 'login', element: <Login /> },
      { path: 'register', element: <Register /> }
    ]
  },
  {
    path: '/post/:id',
    element: <PostDetail />
  },
  {
    path: '/user/:id',
    element: <UserProfile />
  },
  {
    path: '*',
    element: <NotFound />
  }
];
```

### 5.2 è·¯ç”±å®ˆå«

```typescript
// router/AuthGuard.tsx
export const AuthGuard: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const { isAuthenticated } = useSelector((state: RootState) => state.auth);
  const location = useLocation();

  if (!isAuthenticated) {
    return <Navigate to="/auth/login" state={{ from: location }} replace />;
  }

  return <>{children}</>;
};
```

---

## 6. çŠ¶æ€ç®¡ç†

### 6.1 Storeé…ç½®

```typescript
// store/index.ts
import { configureStore } from '@reduxjs/toolkit';
import authReducer from './slices/authSlice';
import homeReducer from './slices/homeSlice';
import communityReducer from './slices/communitySlice';
import publishReducer from './slices/publishSlice';
import messageReducer from './slices/messageSlice';
import profileReducer from './slices/profileSlice';

export const store = configureStore({
  reducer: {
    auth: authReducer,
    home: homeReducer,
    community: communityReducer,
    publish: publishReducer,
    message: messageReducer,
    profile: profileReducer
  },
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: false
    })
});

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
```

### 6.2 Redux Hooks

```typescript
// store/hooks.ts
import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';
import type { RootState, AppDispatch } from './index';

export const useAppDispatch = () => useDispatch<AppDispatch>();
export const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;
```

---

## 7. ç»„ä»¶åº“è®¾è®¡

### 7.1 å¸ƒå±€ç»„ä»¶

#### TabBarï¼ˆåº•éƒ¨å¯¼èˆªæ ï¼‰
```typescript
export const TabBar: React.FC = () => {
  const navigate = useNavigate();
  const location = useLocation();

  const tabs = [
    { key: 'home', title: 'é¦–é¡µ', icon: <HomeIcon /> },
    { key: 'community', title: 'ç¤¾åŒº', icon: <CommunityIcon /> },
    { key: 'publish', title: 'å‘å¸ƒ', icon: <AddIcon /> },
    { key: 'message', title: 'æ¶ˆæ¯', icon: <MessageIcon />, badge: 5 },
    { key: 'profile', title: 'æˆ‘çš„', icon: <UserIcon /> }
  ];

  return (
    <div className={styles.tabBar}>
      {tabs.map(tab => (
        <div
          key={tab.key}
          className={classNames(styles.tab, {
            [styles.active]: location.pathname.includes(tab.key)
          })}
          onClick={() => navigate(`/${tab.key}`)}
        >
          <Badge content={tab.badge}>
            {tab.icon}
          </Badge>
          <span>{tab.title}</span>
        </div>
      ))}
    </div>
  );
};
```

### 7.2 åŠŸèƒ½ç»„ä»¶

#### SSDialogï¼ˆç»Ÿä¸€å¼¹çª—ï¼‰
```typescript
// components/SSDialog/index.tsx
export const SSDialog = {
  confirm: (options: ConfirmOptions): Promise<boolean> => {
    return Dialog.confirm({
      ...options,
      confirmText: options.confirmText || 'ç¡®å®š',
      cancelText: options.cancelText || 'å–æ¶ˆ'
    });
  },

  alert: (options: AlertOptions): Promise<void> => {
    return Dialog.alert({
      ...options,
      confirmText: options.confirmText || 'çŸ¥é“äº†'
    });
  },

  toast: (message: string, type: 'success' | 'error' | 'warning' = 'success') => {
    Toast.show({
      icon: type === 'success' ? 'success' : type === 'error' ? 'fail' : 'loading',
      content: message
    });
  },

  loading: (show: boolean, text = 'åŠ è½½ä¸­...') => {
    if (show) {
      Toast.show({
        icon: 'loading',
        content: text,
        duration: 0
      });
    } else {
      Toast.clear();
    }
  }
};
```

---

## 8. å·¥å…·ç±»è®¾è®¡

æ‰€æœ‰å·¥å…·ç±»æŒ‰ç…§å¼€å‘è§„åˆ™ä½¿ç”¨ `SS` å‰ç¼€å‘½åï¼Œè¯¦è§ `.claude/development-rules.md` æ–‡æ¡£ 4.4èŠ‚ã€‚

ä¸»è¦å·¥å…·ç±»ï¼š
- `SSTimeUtil` - æ—¶é—´å¤„ç†
- `SSStringUtil` - å­—ç¬¦ä¸²å¤„ç†
- `SSValidateUtil` - æ•°æ®éªŒè¯
- `SSStorageUtil` - æœ¬åœ°å­˜å‚¨
- `SSDictUtil` - å­—å…¸ç®¡ç†
- `SSFileUtil` - æ–‡ä»¶å¤„ç†
- `SSImageUtil` - å›¾ç‰‡å¤„ç†

---

## 9. APIæ¥å£è®¾è®¡

### 9.1 æ¥å£è§„èŒƒ

æ‰€æœ‰æ¥å£éµå¾ªRESTfulè®¾è®¡è§„èŒƒï¼Œè¯¦è§æŠ€æœ¯æ¶æ„æ–‡æ¡£ã€‚

### 9.2 æ¥å£åˆ†ç±»

```typescript
// services/api/index.ts
export * from './auth';      // è®¤è¯ç›¸å…³
export * from './user';      // ç”¨æˆ·ç›¸å…³
export * from './post';      // åŠ¨æ€ç›¸å…³
export * from './topic';     // è¯é¢˜ç›¸å…³
export * from './message';   // æ¶ˆæ¯ç›¸å…³
export * from './upload';    // ä¸Šä¼ ç›¸å…³
```

---

## 10. å¼€å‘è§„èŒƒ

ä¸¥æ ¼éµå¾ª `.claude/development-rules.md` æ–‡æ¡£ä¸­çš„æ‰€æœ‰è§„èŒƒï¼š

- âœ… è‡ªå®šä¹‰ç±»æ–‡ä»¶ä½¿ç”¨SSå‰ç¼€
- âœ… UI/è¯·æ±‚/é€»è¾‘ä¸‰å±‚åˆ†ç¦»
- âœ… å‡½æ•°ä¸è¶…è¿‡50è¡Œï¼Œç»„ä»¶ä¸è¶…è¿‡200è¡Œ
- âœ… å­ç»„ä»¶åœ¨å­ç›®å½•ï¼Œé€šç”¨ç»„ä»¶åœ¨ä¸Šçº§
- âœ… å……åˆ†å°è£…å·¥å…·ç±»å’Œå…¬å…±ç»„ä»¶
- âœ… TypeScriptä¸¥æ ¼æ¨¡å¼
- âœ… ä»£ç æäº¤å‰æ£€æŸ¥æ¸…å•

---

## 11. å¼€å‘è®¡åˆ’

### 11.1 ç¬¬ä¸€é˜¶æ®µï¼ˆWeek 1-2ï¼‰ï¼šåŸºç¡€æ¶æ„

- [ ] é¡¹ç›®åˆå§‹åŒ–ã€ç›®å½•ç»“æ„æ­å»º
- [ ] å·¥å…·ç±»å°è£…ï¼ˆ6å¤§å·¥å…·ç±»ï¼‰
- [ ] é€šç”¨ç»„ä»¶å¼€å‘ï¼ˆLayoutã€Dialogã€Loadingç­‰ï¼‰
- [ ] è·¯ç”±é…ç½®ã€çŠ¶æ€ç®¡ç†é…ç½®
- [ ] APIæœåŠ¡å±‚å°è£…

### 11.2 ç¬¬äºŒé˜¶æ®µï¼ˆWeek 3-4ï¼‰ï¼šè®¤è¯ä¸é¦–é¡µ

- [ ] ç™»å½•æ³¨å†Œæ¨¡å—
- [ ] é¦–é¡µå†…å®¹æµ
- [ ] å†…å®¹äº’åŠ¨ï¼ˆç‚¹èµã€è¯„è®ºï¼‰
- [ ] ä¸‹æ‹‰åˆ·æ–°ã€ä¸Šæ‹‰åŠ è½½

### 11.3 ç¬¬ä¸‰é˜¶æ®µï¼ˆWeek 5-6ï¼‰ï¼šç¤¾åŒºä¸å‘å¸ƒ

- [ ] ç¤¾åŒºè¯é¢˜åˆ—è¡¨
- [ ] è¯é¢˜è¯¦æƒ…é¡µ
- [ ] å‘å¸ƒæ¨¡å—ï¼ˆæ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ï¼‰
- [ ] å›¾ç‰‡ä¸Šä¼ ã€è§†é¢‘ä¸Šä¼ 

### 11.4 ç¬¬å››é˜¶æ®µï¼ˆWeek 7-9ï¼‰ï¼šæ¶ˆæ¯æ¨¡å—

- [ ] ä¼šè¯åˆ—è¡¨
- [ ] èŠå¤©å®¤ç•Œé¢
- [ ] WebSocketè¿æ¥
- [ ] å®æ—¶æ¶ˆæ¯æ”¶å‘
- [ ] æ¶ˆæ¯ç±»å‹æ”¯æŒï¼ˆæ–‡å­—ã€å›¾ç‰‡ã€è¯­éŸ³ï¼‰

### 11.5 ç¬¬äº”é˜¶æ®µï¼ˆWeek 10-11ï¼‰ï¼šä¸ªäººä¸­å¿ƒ

- [ ] ä¸ªäººä¿¡æ¯å±•ç¤º
- [ ] æˆ‘çš„åŠ¨æ€
- [ ] æˆ‘çš„å¥½å‹
- [ ] è®¾ç½®é¡µé¢
- [ ] ç¼–è¾‘èµ„æ–™

### 11.6 ç¬¬å…­é˜¶æ®µï¼ˆWeek 12ï¼‰ï¼šä¼˜åŒ–ä¸æµ‹è¯•

- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å…¼å®¹æ€§æµ‹è¯•
- [ ] Bugä¿®å¤
- [ ] ä¸Šçº¿å‡†å¤‡

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-11-06
**æœ€åæ›´æ–°**: 2025-11-06
**ç»´æŠ¤äººå‘˜**: å‰ç«¯å¼€å‘å›¢é˜Ÿ
**å®¡æ ¸çŠ¶æ€**: å¾…å®¡æ ¸
